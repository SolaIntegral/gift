<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚®ãƒ•ãƒˆä¸€è¦§ - GIFT</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
    <style>
        /* ã‚®ãƒ•ãƒˆä¸€è¦§ãƒšãƒ¼ã‚¸å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .page-header {
            text-align: center;
            margin: 40px 0;
            padding: 0 20px;
        }

        .page-header h1 {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
            letter-spacing: -0.5px;
        }

        .page-header p {
            font-size: 16px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .search-filter-section {
            background: var(--background-primary);
            padding: 24px;
            border-radius: var(--border-radius-large);
            box-shadow: var(--shadow-light);
            margin: 0 20px 24px;
            border: 1px solid var(--border-color);
        }

        .search-bar {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }

        .search-bar input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 184, 148, 0.1);
        }

        .search-button {
            padding: 12px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.2s ease;
            box-shadow: var(--shadow-light);
        }

        .search-button:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        .filter-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
        }

        .filter-group select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-small);
            font-size: 14px;
            background: var(--background-primary);
            transition: all 0.2s ease;
        }

        .filter-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 184, 148, 0.1);
        }

        .category-tabs {
            display: flex;
            gap: 8px;
            margin: 0 20px 24px;
            overflow-x: auto;
            padding-bottom: 4px;
        }

        .tab-button {
            padding: 10px 20px;
            background: var(--background-primary);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 500;
            white-space: nowrap;
            transition: all 0.2s ease;
            font-size: 14px;
            box-shadow: var(--shadow-light);
        }

        .tab-button.active,
        .tab-button:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }

        .gifts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            margin: 0 20px 40px;
        }

        .gift-card {
            background: var(--background-primary);
            border-radius: var(--border-radius-large);
            padding: 20px;
            box-shadow: var(--shadow-light);
            transition: all 0.2s ease;
            cursor: pointer;
            border: 1px solid var(--border-color);
        }

        .gift-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-medium);
        }

        .gift-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .gift-card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 6px;
            line-height: 1.4;
        }

        .gift-card-category {
            background: rgba(0, 184, 148, 0.1);
            color: var(--primary-color);
            padding: 4px 10px;
            border-radius: var(--border-radius-small);
            font-size: 12px;
            font-weight: 500;
            border: 1px solid rgba(0, 184, 148, 0.2);
        }

        .popular-badge {
            background: var(--accent-color);
            color: white;
            padding: 4px 10px;
            border-radius: var(--border-radius-small);
            font-size: 12px;
            font-weight: 600;
            box-shadow: var(--shadow-light);
        }

        .gift-card-visual {
            height: 100px;
            border-radius: var(--border-radius);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-color);
        }

        .gift-icon {
            font-size: 40px;
            opacity: 0.8;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .gift-card-price {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 12px;
        }

        .gift-card-description {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .gift-card-features {
            list-style: none;
            margin-bottom: 20px;
        }

        .gift-card-features li {
            padding: 4px 0;
            padding-left: 16px;
            position: relative;
            color: var(--text-secondary);
            font-size: 13px;
        }

        .gift-card-features li::before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: var(--success-color);
            font-weight: 600;
        }

        .gift-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .gift-card-partner {
            font-size: 12px;
            color: var(--text-light);
        }

        .gift-card-button {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: var(--border-radius-small);
            cursor: pointer;
            font-weight: 500;
            font-size: 13px;
            transition: all 0.2s ease;
            box-shadow: var(--shadow-light);
        }

        .gift-card-button:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-medium);
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 16px;
            margin: 0 20px 40px;
        }

        .page-btn {
            padding: 10px 20px;
            background: var(--background-primary);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
            font-size: 14px;
            box-shadow: var(--shadow-light);
        }

        .page-btn:hover:not(:disabled) {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .page-info {
            font-weight: 500;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--background-primary);
            padding: 32px;
            border-radius: var(--border-radius-large);
            box-shadow: var(--shadow-heavy);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid var(--border-color);
        }

        .close-modal {
            position: absolute;
            top: 16px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-light);
            transition: color 0.2s ease;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal:hover {
            color: var(--text-primary);
            background: var(--background-secondary);
        }

        .no-gifts-message {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
            font-size: 16px;
            background: var(--background-primary);
            border-radius: var(--border-radius-large);
            border: 1px solid var(--border-color);
        }

        .no-gifts-message p {
            margin-bottom: 8px;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .gifts-grid {
                grid-template-columns: 1fr;
                margin: 0 16px 32px;
            }

            .search-filter-section {
                margin: 0 16px 20px;
                padding: 20px;
            }

            .filter-controls {
                grid-template-columns: 1fr;
            }

            .category-tabs {
                margin: 0 16px 20px;
            }

            .pagination {
                margin: 0 16px 32px;
            }
        }
    </style>
</head>
<body>
    <div id="gift-list-screen" class="screen active">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨åˆ†ã‚’çµ±ä¸€ãƒ‡ã‚¶ã‚¤ãƒ³ã«æ›´æ–° -->
<header class="header">
    <div class="container">
        <div class="header-content">
            <h1 class="logo" onclick="goHome()">GIFT</h1>
            <nav class="main-nav">
                <a href="#" onclick="goHome()">ãƒ›ãƒ¼ãƒ </a>
                <a href="#" onclick="showGiftList()" class="active">ã‚®ãƒ•ãƒˆä¸€è¦§</a>
                <a href="#" onclick="showServiceInfo()">ã‚µãƒ¼ãƒ“ã‚¹ç´¹ä»‹</a>
                <a href="#" onclick="showAdminLogin()">ç®¡ç†è€…</a>
            </nav>
        </div>
        <p class="tagline">å¥åº·ã‚’è´ˆã‚‹ã€æƒ³ã„ã‚’å±Šã‘ã‚‹</p>
    </div>
</header>

        <main class="main-content">
            <div class="container">
                <div class="page-header">
                    <h1>å¥åº·ã‚®ãƒ•ãƒˆä¸€è¦§</h1>
                    <p>å¤§åˆ‡ãªäººã«ã´ã£ãŸã‚Šã®å¥åº·ã‚®ãƒ•ãƒˆã‚’è¦‹ã¤ã‘ã¾ã—ã‚‡ã†</p>
                </div>

                <!-- æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
                <div class="search-filter-section">
                    <div class="search-bar">
                        <input type="text" id="gift-search" placeholder="ã‚®ãƒ•ãƒˆåã§æ¤œç´¢...">
                        <button class="search-button" onclick="handleSearch()">ğŸ”</button>
                    </div>
                    
                    <div class="filter-controls">
                        <div class="filter-group">
                            <label for="category-filter">ã‚«ãƒ†ã‚´ãƒªãƒ¼</label>
                            <select id="category-filter" onchange="handleFilter()">
                                <option value="">ã™ã¹ã¦</option>
                                <option value="checkup">å¥åº·è¨ºæ–­</option>
                                <option value="fitness">ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹</option>
                                <option value="wellness">ã‚¦ã‚§ãƒ«ãƒã‚¹</option>
                                <option value="consultation">ç›¸è«‡ãƒ»æŒ‡å°</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="budget-filter">äºˆç®—</label>
                            <select id="budget-filter" onchange="handleFilter()">
                                <option value="">ã™ã¹ã¦</option>
                                <option value="low">ã€œ10,000å††</option>
                                <option value="medium">10,000å††ã€œ20,000å††</option>
                                <option value="high">20,000å††ã€œ30,000å††</option>
                                <option value="premium">30,000å††ã€œ</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="sort-filter">ä¸¦ã³é †</label>
                            <select id="sort-filter" onchange="handleFilter()">
                                <option value="popular">äººæ°—é †</option>
                                <option value="price-low">ä¾¡æ ¼ã®å®‰ã„é †</option>
                                <option value="price-high">ä¾¡æ ¼ã®é«˜ã„é †</option>
                                <option value="new">æ–°ç€é †</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚¿ãƒ– -->
                <div class="category-tabs">
                    <button class="tab-button active" onclick="handleCategoryTab('')">ã™ã¹ã¦</button>
                    <button class="tab-button" onclick="handleCategoryTab('checkup')">å¥åº·è¨ºæ–­</button>
                    <button class="tab-button" onclick="handleCategoryTab('fitness')">ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹</button>
                    <button class="tab-button" onclick="handleCategoryTab('wellness')">ã‚¦ã‚§ãƒ«ãƒã‚¹</button>
                    <button class="tab-button" onclick="handleCategoryTab('consultation')">ç›¸è«‡ãƒ»æŒ‡å°</button>
                </div>

                <!-- ã‚®ãƒ•ãƒˆä¸€è¦§ -->
                <div class="gifts-grid" id="gifts-grid">
                    <!-- ã‚®ãƒ•ãƒˆã‚«ãƒ¼ãƒ‰ãŒJavaScriptã§å‹•çš„ã«æŒ¿å…¥ã•ã‚Œã‚‹ -->
                </div>

                <!-- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ -->
                <div class="pagination">
                    <button class="page-btn" id="prev-page" onclick="changePage(-1)">â† å‰ã¸</button>
                    <span class="page-info" id="page-info">1 / 1</span>
                    <button class="page-btn" id="next-page" onclick="changePage(1)">æ¬¡ã¸ â†’</button>
                </div>
            </div>
        </main>
    </div>

    <!-- ã‚®ãƒ•ãƒˆè©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="gift-detail-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeGiftDetail()">&times;</span>
            <div id="gift-detail-content">
                <!-- ã‚®ãƒ•ãƒˆè©³ç´°ãŒJavaScriptã§å‹•çš„ã«æŒ¿å…¥ã•ã‚Œã‚‹ -->
            </div>
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        var allGifts = [
            {
                id: 1,
                name: "ç·åˆå¥åº·è¨ºæ–­ãƒ‘ãƒƒã‚¯",
                category: "checkup",
                price: 15400,
                description: "è©³ç´°ãªè¡€æ¶²æ¤œæŸ»ã‹ã‚‰ç”»åƒè¨ºæ–­ã¾ã§ã€ç·åˆçš„ãªå¥åº·çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯ã§ãã¾ã™ã€‚",
                features: ["è©³ç´°è¡€æ¶²æ¤œæŸ»", "èƒ¸éƒ¨Xç·šæ¤œæŸ»", "å¿ƒé›»å›³æ¤œæŸ»", "åŒ»å¸«ã«ã‚ˆã‚‹çµæœèª¬æ˜"],
                partner: "å¥åº·ã‚¯ãƒªãƒ‹ãƒƒã‚¯æ±äº¬",
                popular: true,
                icon: "ğŸ¥",
                color: "#e8f5e8"
            },
            {
                id: 2,
                name: "ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ä½“é¨“",
                category: "fitness",
                price: 12100,
                description: "å°‚å±ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼ã«ã‚ˆã‚‹å€‹åˆ¥ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä½“é¨“ã‚³ãƒ¼ã‚¹ã§ã™ã€‚",
                features: ["ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ï¼ˆ3å›ï¼‰", "ä½“çµ„æˆæ¸¬å®š", "é‹å‹•ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä½œæˆ"],
                partner: "ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ã‚¸ãƒ B",
                popular: false,
                icon: "ğŸ’ª",
                color: "#e3f2fd"
            },
            {
                id: 3,
                name: "ã‚¦ã‚§ãƒ«ãƒã‚¹ç›¸è«‡ã‚»ãƒƒã‚·ãƒ§ãƒ³",
                category: "wellness",
                price: 6600,
                description: "å°‚é–€ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ã«ã‚ˆã‚‹å¥åº·ãƒ»ç”Ÿæ´»ç¿’æ…£ã®å€‹åˆ¥ç›¸è«‡ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã™ã€‚",
                features: ["å€‹åˆ¥ç›¸è«‡ï¼ˆ60åˆ†ï¼‰", "ç”Ÿæ´»ç¿’æ…£ã‚¢ãƒ‰ãƒã‚¤ã‚¹", "å¥åº·ãƒ—ãƒ©ãƒ³ä½œæˆ"],
                partner: "ã‚¦ã‚§ãƒ«ãƒã‚¹ã‚»ãƒ³ã‚¿ãƒ¼C",
                popular: true,
                icon: "ğŸ§˜",
                color: "#fff3e0"
            },
            {
                id: 4,
                name: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ äººé–“ãƒ‰ãƒƒã‚¯",
                category: "checkup",
                price: 25300,
                description: "æœ€æ–°ã®åŒ»ç™‚æ©Ÿå™¨ã‚’ä½¿ç”¨ã—ãŸåŒ…æ‹¬çš„ãªå¥åº·è¨ºæ–­ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚",
                features: ["å…¨èº«MRIæ¤œæŸ»", "è©³ç´°è¡€æ¶²æ¤œæŸ»", "å†…è¦–é¡æ¤œæŸ»", "å°‚é–€åŒ»ã«ã‚ˆã‚‹è¨ºå¯Ÿ"],
                partner: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚¯ãƒªãƒ‹ãƒƒã‚¯",
                popular: false,
                icon: "âš•ï¸",
                color: "#f3e5f5"
            },
            {
                id: 5,
                name: "ãƒ¨ã‚¬ï¼†ç‘æƒ³ä½“é¨“",
                category: "wellness",
                price: 8800,
                description: "å¿ƒã¨ä½“ã®ãƒãƒ©ãƒ³ã‚¹ã‚’æ•´ãˆã‚‹ãƒ¨ã‚¬ã¨ç‘æƒ³ã®ä½“é¨“ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚",
                features: ["ãƒ¨ã‚¬ãƒ¬ãƒƒã‚¹ãƒ³ï¼ˆ5å›ï¼‰", "ç‘æƒ³æŒ‡å°", "ã‚¹ãƒˆãƒ¬ã‚¹æ¸¬å®š", "ãƒªãƒ©ã‚¯ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³"],
                partner: "ãƒ¨ã‚¬ã‚¹ã‚¿ã‚¸ã‚ªZen",
                popular: false,
                icon: "ğŸ•‰ï¸",
                color: "#fce4ec"
            },
            {
                id: 6,
                name: "æ „é¤Šã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°",
                category: "consultation",
                price: 9900,
                description: "ç®¡ç†æ „é¤Šå£«ã«ã‚ˆã‚‹å€‹åˆ¥ã®æ „é¤ŠæŒ‡å°ã¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ææ¡ˆã‚’è¡Œã„ã¾ã™ã€‚",
                features: ["æ „é¤Šåˆ†æ", "å€‹åˆ¥ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä½œæˆ", "ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—ï¼ˆ3å›ï¼‰", "ãƒ¬ã‚·ãƒ”æä¾›"],
                partner: "æ „é¤Šã‚¯ãƒªãƒ‹ãƒƒã‚¯",
                popular: true,
                icon: "ğŸ¥—",
                color: "#e0f2f1"
            }
        ];

        var filteredGifts = allGifts.slice();
        var currentPage = 1;
        var giftsPerPage = 6;

        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
        function getCategoryName(category) {
            var categoryNames = {
                checkup: "å¥åº·è¨ºæ–­",
                fitness: "ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹",
                wellness: "ã‚¦ã‚§ãƒ«ãƒã‚¹",
                consultation: "ç›¸è«‡ãƒ»æŒ‡å°"
            };
            return categoryNames[category] || category;
        }

        function formatPrice(price) {
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // æ¤œç´¢æ©Ÿèƒ½
        function handleSearch() {
            var searchInput = document.getElementById("gift-search");
            if (!searchInput) return;

            var searchTerm = searchInput.value.toLowerCase();
            filteredGifts = [];
            
            for (var i = 0; i < allGifts.length; i++) {
                var gift = allGifts[i];
                if (gift.name.toLowerCase().indexOf(searchTerm) !== -1 || 
                    gift.description.toLowerCase().indexOf(searchTerm) !== -1) {
                    filteredGifts.push(gift);
                }
            }
            
            currentPage = 1;
            renderGifts();
        }

        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
        function handleFilter() {
            var categoryFilter = document.getElementById("category-filter");
            var budgetFilter = document.getElementById("budget-filter");
            var sortFilter = document.getElementById("sort-filter");

            if (!categoryFilter || !budgetFilter || !sortFilter) return;

            var categoryValue = categoryFilter.value;
            var budgetValue = budgetFilter.value;
            var sortValue = sortFilter.value;

            // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
            filteredGifts = [];
            for (var i = 0; i < allGifts.length; i++) {
                var gift = allGifts[i];
                var categoryMatch = !categoryValue || gift.category === categoryValue;
                var budgetMatch = true;

                if (budgetValue) {
                    if (budgetValue === "low") {
                        budgetMatch = gift.price <= 10000;
                    } else if (budgetValue === "medium") {
                        budgetMatch = gift.price > 10000 && gift.price <= 20000;
                    } else if (budgetValue === "high") {
                        budgetMatch = gift.price > 20000 && gift.price <= 30000;
                    } else if (budgetValue === "premium") {
                        budgetMatch = gift.price > 30000;
                    }
                }

                if (categoryMatch && budgetMatch) {
                    filteredGifts.push(gift);
                }
            }

            // ã‚½ãƒ¼ãƒˆ
            if (sortValue === "popular") {
                filteredGifts.sort(function(a, b) {
                    return (b.popular ? 1 : 0) - (a.popular ? 1 : 0);
                });
            } else if (sortValue === "price-low") {
                filteredGifts.sort(function(a, b) {
                    return a.price - b.price;
                });
            } else if (sortValue === "price-high") {
                filteredGifts.sort(function(a, b) {
                    return b.price - a.price;
                });
            } else if (sortValue === "new") {
                filteredGifts.sort(function(a, b) {
                    return b.id - a.id;
                });
            }

            currentPage = 1;
            renderGifts();
        }

        // ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚¿ãƒ–
        function handleCategoryTab(category) {
            // ã‚¿ãƒ–ã®çŠ¶æ…‹æ›´æ–°
            var tabButtons = document.querySelectorAll(".tab-button");
            for (var i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove("active");
            }
            event.target.classList.add("active");

            // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨
            var categoryFilter = document.getElementById("category-filter");
            if (categoryFilter) {
                categoryFilter.value = category;
                handleFilter();
            }
        }

        // ã‚®ãƒ•ãƒˆè¡¨ç¤º
        function renderGifts() {
            var giftsGrid = document.getElementById("gifts-grid");
            if (!giftsGrid) return;

            var startIndex = (currentPage - 1) * giftsPerPage;
            var endIndex = startIndex + giftsPerPage;
            var currentGifts = filteredGifts.slice(startIndex, endIndex);

            if (currentGifts.length === 0) {
                giftsGrid.innerHTML = '<div class="no-gifts-message"><p>æ¡ä»¶ã«åˆã†ã‚®ãƒ•ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p><p>æ¤œç´¢æ¡ä»¶ã‚’å¤‰æ›´ã—ã¦ãŠè©¦ã—ãã ã•ã„ã€‚</p></div>';
                return;
            }

            var html = "";
            for (var i = 0; i < currentGifts.length; i++) {
                var gift = currentGifts[i];
                html += '<div class="gift-card" onclick="showGiftDetail(' + gift.id + ')">';
                html += '<div class="gift-card-header">';
                html += '<div>';
                html += '<h3 class="gift-card-title">' + gift.name + '</h3>';
                html += '<span class="gift-card-category">' + getCategoryName(gift.category) + '</span>';
                html += '</div>';
                if (gift.popular) {
                    html += '<span class="popular-badge">äººæ°—</span>';
                }
                html += '</div>';

                html += '<div class="gift-card-visual" style="background-color: ' + gift.color + ';">';
                html += '<div class="gift-icon">' + gift.icon + '</div>';
                html += '</div>';

                html += '<div class="gift-card-price">Â¥' + formatPrice(gift.price) + '</div>';
                html += '<p class="gift-card-description">' + gift.description + '</p>';

                html += '<ul class="gift-card-features">';
                var featuresToShow = gift.features.slice(0, 3);
                for (var j = 0; j < featuresToShow.length; j++) {
                    html += '<li>' + featuresToShow[j] + '</li>';
                }
                if (gift.features.length > 3) {
                    html += '<li>ä»–ã«ã‚‚ç‰¹å…¸ã‚ã‚Š</li>';
                }
                html += '</ul>';

                html += '<div class="gift-card-footer">';
                html += '<span class="gift-card-partner">' + gift.partner + '</span>';
                html += '<button class="gift-card-button" onclick="event.stopPropagation(); selectGiftFromList(' + gift.id + ')">é¸æŠã™ã‚‹</button>';
                html += '</div>';
                html += '</div>';
            }

            giftsGrid.innerHTML = html;
            updatePagination();
        }

        // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
        function changePage(direction) {
            var totalPages = Math.ceil(filteredGifts.length / giftsPerPage);
            var newPage = currentPage + direction;

            if (newPage >= 1 && newPage <= totalPages) {
                currentPage = newPage;
                renderGifts();
            }
        }

        function updatePagination() {
            var totalPages = Math.ceil(filteredGifts.length / giftsPerPage);
            var pageInfo = document.getElementById("page-info");
            var prevButton = document.getElementById("prev-page");
            var nextButton = document.getElementById("next-page");

            if (pageInfo) {
                pageInfo.textContent = currentPage + " / " + totalPages;
            }

            if (prevButton) {
                prevButton.disabled = currentPage === 1;
            }

            if (nextButton) {
                nextButton.disabled = currentPage === totalPages;
            }
        }

        // ã‚®ãƒ•ãƒˆè©³ç´°è¡¨ç¤º
        function showGiftDetail(giftId) {
            var gift = null;
            for (var i = 0; i < allGifts.length; i++) {
                if (allGifts[i].id === giftId) {
                    gift = allGifts[i];
                    break;
                }
            }
            
            if (!gift) return;

            var modal = document.getElementById("gift-detail-modal");
            var content = document.getElementById("gift-detail-content");

            if (!modal || !content) return;

            var html = '<div class="gift-detail">';
            html += '<h2>' + gift.name + '</h2>';
            html += '<p><strong>ã‚«ãƒ†ã‚´ãƒªãƒ¼:</strong> ' + getCategoryName(gift.category) + '</p>';
            html += '<p><strong>ä¾¡æ ¼:</strong> Â¥' + formatPrice(gift.price) + '</p>';
            html += '<p><strong>èª¬æ˜:</strong> ' + gift.description + '</p>';
            html += '<p><strong>ææºæ–½è¨­:</strong> ' + gift.partner + '</p>';
            html += '<h3>å«ã¾ã‚Œã‚‹ã‚µãƒ¼ãƒ“ã‚¹:</h3>';
            html += '<ul>';
            for (var i = 0; i < gift.features.length; i++) {
                html += '<li>' + gift.features[i] + '</li>';
            }
            html += '<button onclick="selectGiftFromList(' + gift.id + ')" style="background: var(--primary-color); color: white; border: none; padding: 15px 30px; border-radius: var(--border-radius); cursor: pointer; margin-right: 10px; font-weight: 500;">ã“ã®ã‚®ãƒ•ãƒˆã‚’é¸ã¶</button>';
            html += '<button onclick="closeGiftDetail()" style="background: var(--background-secondary); color: var(--text-secondary); border: 2px solid var(--border-color); padding: 15px 30px; border-radius: var(--border-radius); cursor: pointer; font-weight: 500;">é–‰ã˜ã‚‹</button>';
            html += '</div>';

            content.innerHTML = html;
            modal.classList.add("active");
        }

        function closeGiftDetail() {
            var modal = document.getElementById("gift-detail-modal");
            if (modal) {
                modal.classList.remove("active");
            }
        }

        function selectGiftFromList(giftId) {
            var gift = null;
            for (var i = 0; i < allGifts.length; i++) {
                if (allGifts[i].id === giftId) {
                    gift = allGifts[i];
                    break;
                }
            }
            
            if (!gift) return;

            // é¸æŠã•ã‚ŒãŸã‚®ãƒ•ãƒˆã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
            var selectedGift = {
                id: gift.id,
                title: gift.name,
                description: gift.description,
                price: "Â¥" + formatPrice(gift.price),
                features: gift.features
            };

            try {
                localStorage.setItem("selectedGift", JSON.stringify(selectedGift));
            } catch (e) {
                console.warn("LocalStorage not available");
            }

            // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
            closeGiftDetail();

            // ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«æˆ»ã£ã¦å—å–äººç”»é¢ã‚’è¡¨ç¤º
            window.location.href = "index.html#recipient";
        }

        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°
        function goHome() {
            window.location.href = "../index.html";
        }

        function showGiftList() {
            // æ—¢ã«ã‚®ãƒ•ãƒˆä¸€è¦§ãƒšãƒ¼ã‚¸ã«ã„ã‚‹å ´åˆã¯ä½•ã‚‚ã—ãªã„
            return;
        }

        function showServiceInfo() {
            window.location.href = "service-info.html";
        }

        function showAdminLogin() {
            window.location.href = "admin.html";
        }

        // åˆæœŸåŒ–
        function initPage() {
            console.log("Initializing gift list page...");
            renderGifts();
            console.log("Gift list page initialized successfully");
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã«åˆæœŸåŒ–
        if (document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", initPage);
        } else {
            initPage();
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å‡¦ç†
        document.addEventListener("click", function(e) {
            var modal = document.getElementById("gift-detail-modal");
            if (e.target === modal) {
                modal.classList.remove("active");
            }
        });

        console.log("Gift list script loaded successfully");
    </script>
</body>
</html>
